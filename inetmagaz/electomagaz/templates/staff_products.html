{% include "header.html" %}
<div style="max-width:1200px;margin:40px auto;background:#fff;padding:40px 30px;border-radius:10px;box-shadow:0 2px 12px rgba(0,0,0,0.07);">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;">
        <h1 style="font-size:2em;color:#2c3e50;margin:0;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏</h1>
        <a href="/staff/products/add/" style="background:#2c3e50;color:#fff;padding:10px 20px;border-radius:5px;text-decoration:none;">+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</a>
    </div>

    <!-- Filters -->
    <div style="background:#f8f9fa;padding:20px;border-radius:8px;margin-bottom:30px;">
        <form method="GET" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;">
            <div>
                <label style="display:block;margin-bottom:5px;color:#666;">–ü–æ–∏—Å–∫</label>
                <input type="text" name="search" value="{{ request.GET.search }}" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;">
            </div>
            <div>
                <label style="display:block;margin-bottom:5px;color:#666;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                <select name="category" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;">
                    <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                    {% for category in categories %}
                    <option value="{{ category.id }}" {% if request.GET.category == category.id|stringformat:"i" %}selected{% endif %}>
                        {{ category.name }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label style="display:block;margin-bottom:5px;color:#666;">–ë—Ä–µ–Ω–¥</label>
                <select name="brand" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;">
                    <option value="">–í—Å–µ –±—Ä–µ–Ω–¥—ã</option>
                    {% for brand in brands %}
                    <option value="{{ brand.id }}" {% if request.GET.brand == brand.id|stringformat:"i" %}selected{% endif %}>
                        {{ brand.name }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label style="display:block;margin-bottom:5px;color:#666;">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</label>
                <select name="sort" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;">
                    <option value="name" {% if request.GET.sort == 'name' %}selected{% endif %}>–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é</option>
                    <option value="-price" {% if request.GET.sort == '-price' %}selected{% endif %}>–ü–æ —Ü–µ–Ω–µ (—É–±—ã–≤.)</option>
                    <option value="price" {% if request.GET.sort == 'price' %}selected{% endif %}>–ü–æ —Ü–µ–Ω–µ (–≤–æ–∑—Ä.)</option>
                    <option value="-created_at" {% if request.GET.sort == '-created_at' %}selected{% endif %}>–ü–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ)</option>
                    <option value="created_at" {% if request.GET.sort == 'created_at' %}selected{% endif %}>–ü–æ –¥–∞—Ç–µ (—Å—Ç–∞—Ä—ã–µ)</option>
                </select>
            </div>
            <div style="display:flex;align-items:flex-end;">
                <button type="submit" style="background:#2c3e50;color:#fff;padding:8px 20px;border:none;border-radius:4px;cursor:pointer;">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                <a href="/staff/products/" style="margin-left:10px;color:#666;text-decoration:none;">–°–±—Ä–æ—Å–∏—Ç—å</a>
            </div>
        </form>
    </div>

    <!-- Products Table -->
    <div style="overflow-x:auto;">
        <table style="width:100%;border-collapse:collapse;">
            <thead>
                <tr style="background:#f8f9fa;">
                    <th style="padding:12px;text-align:left;border-bottom:2px solid #ddd;">ID</th>
                    <th style="padding:12px;text-align:left;border-bottom:2px solid #ddd;">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th style="padding:12px;text-align:left;border-bottom:2px solid #ddd;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                    <th style="padding:12px;text-align:left;border-bottom:2px solid #ddd;">–ë—Ä–µ–Ω–¥</th>
                    <th style="padding:12px;text-align:right;border-bottom:2px solid #ddd;">–¶–µ–Ω–∞</th>
                    <th style="padding:12px;text-align:center;border-bottom:2px solid #ddd;">–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                <tr style="border-bottom:1px solid #eee;">
                    <td style="padding:12px;">{{ product.id }}</td>
                    <td style="padding:12px;">
                        <a href="/product/{{ product.id }}/" style="color:#2c3e50;text-decoration:none;">{{ product.name }}</a>
                    </td>
                    <td style="padding:12px;">{{ product.category.name }}</td>
                    <td style="padding:12px;">{{ product.brand.name }}</td>
                    <td style="padding:12px;text-align:right;">{{ product.price }} ‚ÇΩ</td>
                    <td style="padding:12px;text-align:center;">
                        <a href="/staff/products/edit/{{ product.id }}/" style="color:#3498db;text-decoration:none;margin-right:10px;">‚úèÔ∏è</a>
                        <a href="/staff/products/delete/{{ product.id }}/" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä?')" style="color:#e74c3c;text-decoration:none;">üóëÔ∏è</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" style="padding:20px;text-align:center;color:#666;">–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    {% if products.has_other_pages %}
    <div style="margin-top:30px;text-align:center;">
        {% if products.has_previous %}
        <a href="?page={{ products.previous_page_number }}{% for key,value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" style="color:#2c3e50;text-decoration:none;margin:0 5px;">‚Üê</a>
        {% endif %}
        
        {% for num in products.paginator.page_range %}
            {% if products.number == num %}
            <span style="background:#2c3e50;color:#fff;padding:5px 10px;border-radius:3px;margin:0 5px;">{{ num }}</span>
            {% else %}
            <a href="?page={{ num }}{% for key,value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" style="color:#2c3e50;text-decoration:none;margin:0 5px;">{{ num }}</a>
            {% endif %}
        {% endfor %}

        {% if products.has_next %}
        <a href="?page={{ products.next_page_number }}{% for key,value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" style="color:#2c3e50;text-decoration:none;margin:0 5px;">‚Üí</a>
        {% endif %}
    </div>
    {% endif %}
</div> 